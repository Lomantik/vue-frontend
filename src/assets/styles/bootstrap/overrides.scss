@use 'sass:map';
@use 'sass:color';
@use "../tokens/variables" as *;

$enable-rfs: false;

$container-max-widths: $custom-container-max-widths;
$spacers: $custom-spacers;
$theme-colors: $custom-theme-colors;

$body-bg: color('white');
$body-color: color('primary');
$body-font-family: font-family('base');
$body-font-size: font-size(17);

$breadcrumb-active-color: color('primary');
$breadcrumb-color: color('muted');

$btn-border-radius: border-radius('base');
$btn-border-width: spacer(0);
$btn-color: color('primary');
$btn-padding-y: spacer(14);
$btn-padding-x: spacer(34);
$btn-focus-box-shadow: box-shadow('none');
$btn-font-family: font-family(base);
$btn-font-size: font-size(14);
$btn-font-weight: font-weight(500);
$btn-line-height: line-height('14-20');
$btn-link-color: color('primary');

$dropdown-font-size: font-size(14);
$dropdown-link-active-bg: background('none');
$dropdown-link-active-color: color('grey');
$dropdown-link-active-hover-color: color('blue');
$dropdown-link-hover-bg: background('none');
$dropdown-link-hover-color: color('blue');
$dropdown-link-line-height: line-height(110);

$grid-gutter-width: gutter(30);

$headings-color: color('primary');
$headings-font-family: font-family('bitter');

$input-color: color('primary');
$input-font-family: font-family('base');
$input-placeholder-color: color('muted');
$input-border-radius: border-radius('base');
$input-padding-y: spacer(14);
$input-padding-x: spacer(7);
$input-focus-box-shadow: box-shadow('none');

$line-height-base: line-height('base');

$link-color: color('primary');
$link-decoration: link-decoration('none');
$link-hover-decoration: link-decoration('none');
$link-hover-color: color('blue');

$nav-link-color: color('primary');
$nav-link-font-family: font-family('base');
$nav-link-hover-color: color('blue');

$navbar-light-active-color: color('grey');
$navbar-light-color: color('primary');
$navbar-light-hover-color: color('blue');
$navbar-nav-link-padding-x: spacer(20);

$spacer: spacer(3);

$text-color: color('primary');
$text-muted: color('muted');

/* Bootstrap required */
@import "../../../../node_modules/bootstrap/scss/functions";
@import "../../../../node_modules/bootstrap/scss/variables";

$font-sizes: map-merge($font-sizes, $custom-font-sizes);

@import "../../../../node_modules/bootstrap/scss/maps";
@import "../../../../node_modules/bootstrap/scss/mixins";

/* Bootstrap utilities */
@import "../../../../node_modules/bootstrap/scss/utilities";

$aspect-ratios: map-merge(
    $aspect-ratios,
    $custom-aspect-ratios
);
$gutters: map-merge(
    $gutters,
    $custom-gutters
);
$position-values: map-merge(
    $position-values,
    $custom-position
);

$utilities: map-merge(
    $utilities,
    (
      "background": (
        property: background,
        class: background,
        responsive: true,
        values: $custom-background
      ),
      "border": map-merge(
          map-get($utilities, "border"),
          (
            responsive: true,
            values: map-merge(
                map-get(map-get($utilities, "border"), "values"),
                $custom-border
            )
          )
      ),
      "border-color": map-merge(
          map-get($utilities, "border-color"),
          (
            responsive: true,
            values: map-merge(
                map-get(map-get($utilities, "border-color"), "values"),
                $custom-theme-colors
            )
          )
      ),
      "border-radius": (
        property: border-radius,
        class: border-radius,
        responsive: true,
        values: $custom-border-radius
      ),
      "border-width": map-merge(
          map-get($utilities, "border-width"),
          ( responsive: true )
      ),
      "content": (
        property: content,
        class: content,
        responsive: true,
        values: $custom-content
      ),
      "fill": (
        property: fill,
        class: fill,
        responsive: true,
        values: $custom-theme-colors
      ),
      "font-family": (
        property: font-family,
        class: font-family,
        responsive: true,
        values: $custom-font-family
      ),
      "font-size": map-merge(
          map-get($utilities, "font-size"),
          (
            responsive: true
          )
      ),
      "height": map-merge(
          map-get($utilities, "height"),
          (
            responsive: true,
            values: map-merge(
                map-get(map-get($utilities, "height"), "values"),
                $custom-height
            )
          )
      ),
      "left": (
        property: left,
        class: left,
        responsive: true,
        values: $custom-spacers
      ),
      "letter-spacing": (
        property: letter-spacing,
        class: ls,
        responsive: true,
        values: $custom-letter-spacings
      ),
      "line-height": (
        property: line-height,
        class: lh,
        values: $custom-line-height
      ),
      "max-height": (
        property: max-height,
        class: mh,
        values: $custom-height
      ),
      "max-width": (
        property: max-width,
        class: mw,
        responsive: true,
        values: $custom-width
      ),
      "min-height": (
        property: min-height,
        class: min-h,
        values: $custom-height
      ),
      "min-viewport-height": (
        property: min-height,
        class: min-vh,
        values: $custom-viewport-height
      ),
      "min-width": (
        property: min-width,
        class: min-w,
        values: $custom-width
      ),
      "opacity": map-merge(
          map-get($utilities, "opacity"),
          (
            values: map-merge(
                map-get(map-get($utilities, "opacity"), "values"),
                $custom-opacity
            )
          )
      ),
      "pointer-events": (
        property: pointer-events,
        class: pe,
        responsive: true,
        values: $custom-pointer-events
      ),
      "position": map-merge(
          map-get($utilities, "position"),
          (responsive: true),
      ),
      "rounded": map-merge(
          map-get($utilities, "rounded"),
          (
            values: map-merge(
                map-get(map-get($utilities, "rounded"), "values"),
                $custom-rounded
            )
          )
      ),
      "stroke": (
        property: stroke,
        class: stroke,
        responsive: true,
        values: $custom-theme-colors
      ),
      "text-opacity": (
        property: --bs-text-opacity,
        class: text-opacity,
        values: $custom-opacity
      ),
      "viewport-height": map-merge(
          map-get($utilities, "viewport-height"),
          (
            responsive: true,
            values: map-merge(
                map-get(map-get($utilities, "viewport-height"), "values"),
                (auto: auto)
            ),
          ),
      ),
      "width": map-merge(
          map-get($utilities, "width"),
          (
            responsive: true
          )
      ),
    ));

/* Utilities API (classes generation) */
@import "../../../../node_modules/bootstrap/scss/utilities/api";

/* Other Bootstrap */
@import "../../../../node_modules/bootstrap/scss/bootstrap";

:root {
  --bs-body-font-family: #{font-family('base')};
  --bs-body-color: #{color('primary')};
  --bs-body-bg: #{color('white')};

  --bs-heading-color: #{color('primary')};

  --bs-link-color: #{color('primary')};
  --bs-link-hover-color: color('blue');

  --color-accent: color('primary');
}

@each $name, $color in $theme-colors {
  .btn-#{$name} {
    --bs-btn-color: #{contrast-color($name)};
    --bs-btn-bg: #{$color};
    --bs-btn-hover-bg: #{$color};
    --bs-btn-hover-color: #{contrast-color($name)};
  }
}
